---
layout: default  
permalink: /:bookid
---
{% assign bookseries =  page.bookseries %}
{% assign bookid =  page.bookid |append: '' %} <!--cast to string-->
  
{% assign book = site.data.series[bookseries].books[bookid] %}
 
 

{% assign authorlist = '' | split: ' ' %} <!--initialize array-->
{% for  author in book.creators.authors %}
  {% assign normalizedauthor = author[0] | append:" " | append: author[1] %} 
  {% assign authorlist = authorlist | push:  normalizedauthor %}
  {% assign authorsuffix = '(authors)' %}
  {% if  {{forloop.length}} == 1 %}
    {% assign authorsuffix = '(author)' %}
  {% endif %}
{% else %}
  {% assign authorsuffix = '' %}
{% endfor %} 


{% assign editorlist = '' | split: ' ' %} <!--initialize array-->
{% for  editor in book.creators.editors %}
  {% assign normalizededitor = editor[0] | append: " " | append: editor[1] %} 
  {% assign editorlist = editorlist | push:  normalizededitor %}
  {% assign editorsuffix = '(editors)' %} 
  {% if  {{forloop.length}} == 1 %}
    {% assign editorsuffix = '(editor)' %} 
  {% endif %}
{% else %}
  {% assign editorsuffix = '' %} 
  {% assign authorsuffix = '' %} <!--if no editors are present, the authors are not explicitly marked as such-->
{% endfor %} 


{% assign authorstring = authorlist | join:  ', ' |append: ' '| append: authorsuffix %}
{% assign editorstring = editorlist | join:  ', ' |append: ' '| append: editorsuffix %}
{% assign creatorstring = authorstring | append: editorstring %}

<div id="topbookblock">
<div> {{ book.title }} </div>
{%if book.booksubtitle%}
  <div id="booksubtitle"> {{ book.booksubtitle }} </div>
{%endif %}

<div id="creators"> {{ creatorstring }} </div>
 
</div> 



<div id="coverimg">
  <img src="/resources/img/{{page.bookid}}.png">  
  <div class="linekwrapper">
    <div class="booklink" id="downloadpdf"> <a href=""><img src="/resources/img/pdf.jpeg"/><a> </div>
    <div class="booklink" id="createspace"> <a href="{{book.createspace}}"><img src="/resources/img/amazon.png"/></a> </div>
    <div class="booklink" id="bod"> <a href="{{book.bod}}"><img src="/resources/img/bod.jpg"/></a></div>
  </div> 
  <div id="metadata">
  <h4> Series </h4>
     <div id="seriesposition">
        <span id="seriestitle"> {{site.data.series[page.bookseries].name}} </span> <span id="seriesnumber"> {{book.seriesnumber}} </span>
     </div>
    <div id="isbns">
      
      <h4> ISBNs </h4>
      {% for isbn in book.isbns %}
          {% assign key = isbn[0]%}
          {% assign value = isbn[1]%}
          <div class="isbn">
            <span class="isbntype">{{key}}</span>:
            <span class="isbnvalue">{{value}}</span>
          </div>
      {% endfor %}  

    </div> 
    
      <h4> DOI </h4>
    <div id="doi">
      DOI: <span id="doi">{{book.doi}}</span>
    </div>
    <div id="publicationdate">
      Published: <span id="doi">{{book.publicationdate}}</span>
    </div>
  </div>
  <div id="acknowledgements">
    <div id="proofreaders">
      <h4> Proofreaders </h4>
      <ul>
      {%for pr in book.proofreaders%}
        <li>{{pr}}</li>
      {%endfor%}
    </div>
    <div id="typesetters">
            <h4> Typesetters </h4>
      <ul>
      {%for pr in book.typesetters%}
        <li>{{pr}}</li>
      {%endfor%}
    </div>
    <div id="illustrators">
            <h4> Illustrators </h4>
      <ul>
      {%for pr in book.illustrators%}
        <li>{{pr}}</li>
      {%endfor%}
    </div> 
  </div>
</div> 

<div id="downloadlinks"> 
</div>

<div id="synopsis">
<h3> About this book </h3>
  {{book.blurb}}
  </div> 
  
  {%for author in book.creators.authors%} 
  <h3> About  {{ author[0] }} {{author[1] }} </h3>
  <div class="creatorbio">
  {{ author[2] }}
  </div> 
  {% endfor %}
  
  {%for editor in book.creators.editors%} 
  <h3> About  {{ editor[0] }} {{editor[1] }} </h3>
  <div class="creatorbio">
  {{ editor[2] }}
  </div> 
  {% endfor %}

{%if book.chapters%}
<h3> Chapters </h3>
  <div id="chapters">
    {%for ch_hash in book.chapters%}
      {%assign chapterid=ch_hash[0]%}
      {%assign chapter=ch_hash[1]%}
      <br />
      <div class="chapterid"> {{ chapterid }} </div> 
      <div class="chapter">
        <div class="chapterheading">
          <div class="chapterfirstline">
            <div class="chaptertitle"> {{ chapter.title }} </div> 
            <div class="chaptersubtitle"> {{ chapter.subtitle }} </div>
          </div>
        </div>
        <div class="chapterauthormetadatablock">
          <div class="chapterauthors">   
            {% assign chapterauthorlist = '' | split: ' ' %} <!--initialize array-->
            {% for  chapterauthor in chapter.authors %} 
              {% assign normalizedchapterauthor = chapterauthor| join: " " %} 
              {% assign chapterauthorlist = chapterauthorlist | push:  normalizedchapterauthor %}       
            {% endfor %} 
            {% assign chapterauthorstring = chapterauthorlist | join:  ', ' %}
            {{ chapterauthorstring }}
          </div>
          <div class="chapterdoi"> DOI:
            <span> {{ chapter.chapterdoi }} </span>
          </div> 
        </div> 
        <div class="chapterdownload" >
          <a href="{{ chapter.downloadlink}}"> <img src="/resources/img/pdf.jpeg" width="30px" /></a>
        </div>
      </div>
    {%endfor%} 
  </div> 
{%endif%} 